<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>iPhone 15 Repair - Phase 2: Preparation</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #f0f0f0;
        }

        #info {
            position: absolute;
            top: 10px;
            width: 100%;
            text-align: center;
            font-family: 'Inter', sans-serif;
            pointer-events: none;
            color: #333;
        }

        #instructions {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        #sub-instructions {
            font-size: 1em;
            color: #555;
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border-radius: 8px;
        }
    </style>
</head>

<body>
    <div id="info">
        <div id="instructions">Phase 2: Preparation</div>
        <div id="sub-instructions">
            1. <strong>Back Up</strong> your data.<br>
            2. <strong>Discharge Battery</strong> below 25% (Safety).<br>
            3. <strong>Power Off</strong> the device completely.
        </div>
    </div>
    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js", "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/" } }
    </script>
    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { FontLoader } from 'three/addons/loaders/FontLoader.js';
        import { TextGeometry } from 'three/addons/geometries/TextGeometry.js';

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xf5f5f7);
        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 0, 150);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);
        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableRotate = false; // Keep it 2D-ish

        const ambientLight = new THREE.AmbientLight(0xffffff, 0.8); scene.add(ambientLight);
        const dirLight = new THREE.DirectionalLight(0xffffff, 0.5); dirLight.position.set(0, 0, 100); scene.add(dirLight);

        // Materials
        const redMat = new THREE.MeshStandardMaterial({ color: 0xff3b30 });
        const greenMat = new THREE.MeshStandardMaterial({ color: 0x34c759 });
        const blackMat = new THREE.MeshStandardMaterial({ color: 0x000000 });
        const grayMat = new THREE.MeshStandardMaterial({ color: 0x8e8e93 });

        // 1. Cloud Icon (Backup) - Left
        const cloudGroup = new THREE.Group();
        const c1 = new THREE.Mesh(new THREE.SphereGeometry(10, 32, 32), new THREE.MeshStandardMaterial({ color: 0x007aff }));
        const c2 = new THREE.Mesh(new THREE.SphereGeometry(8, 32, 32), new THREE.MeshStandardMaterial({ color: 0x007aff }));
        c2.position.set(12, -2, 0);
        const c3 = new THREE.Mesh(new THREE.SphereGeometry(8, 32, 32), new THREE.MeshStandardMaterial({ color: 0x007aff }));
        c3.position.set(-12, -2, 0);
        cloudGroup.add(c1); cloudGroup.add(c2); cloudGroup.add(c3);
        cloudGroup.position.set(-50, 20, 0);
        scene.add(cloudGroup);

        // 2. Battery Icon (Discharge) - Center
        const batteryGroup = new THREE.Group();
        const body = new THREE.Mesh(new THREE.BoxGeometry(30, 15, 5), grayMat); // Outline
        const terminal = new THREE.Mesh(new THREE.BoxGeometry(3, 8, 5), grayMat);
        terminal.position.set(16.5, 0, 0);
        const level = new THREE.Mesh(new THREE.BoxGeometry(6, 11, 5), redMat); // Low battery
        level.position.set(-10, 0, 0.1);
        batteryGroup.add(body); batteryGroup.add(terminal); batteryGroup.add(level);
        batteryGroup.position.set(0, 20, 0);
        scene.add(batteryGroup);

        // 3. Power Button (Off) - Right
        const powerGroup = new THREE.Group();
        const ring = new THREE.Mesh(new THREE.TorusGeometry(10, 2, 16, 32, Math.PI * 1.5), blackMat);
        ring.rotation.z = Math.PI * 0.75;
        const line = new THREE.Mesh(new THREE.BoxGeometry(2, 10, 2), blackMat);
        line.position.y = 5;
        powerGroup.add(ring); powerGroup.add(line);
        powerGroup.position.set(50, 20, 0);
        scene.add(powerGroup);

        // Animation Loop
        function animate() {
            requestAnimationFrame(animate);

            // Pulse the low battery
            const scale = 1 + Math.sin(Date.now() * 0.005) * 0.1;
            level.scale.set(scale, 1, 1);

            renderer.render(scene, camera);
        }
        animate();
        window.addEventListener('resize', () => { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); });
    </script>
</body>

</html>